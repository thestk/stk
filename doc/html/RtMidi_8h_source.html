<HTML>
<HEAD>
<TITLE>The Synthesis ToolKit in C++ (STK)</TITLE>
<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<CENTER>
<img src="princeton.gif"> &nbsp; <img src="ccrma.gif"> &nbsp; <img src="mcgill.gif"><P>
<a class="qindex" href="index.html">Home</a> &nbsp; <a class="qindex" href="information.html">Information</a> &nbsp; <a class="qindex" href="classes.html">Classes</a> &nbsp; <a class="qindex" href="download.html">Download</a> &nbsp; <a class="qindex" href="usage.html">Usage</a> &nbsp; <a class="qindex" href="maillist.html">Mail List</a> &nbsp; <a class="qindex" href="system.html">Requirements</a> &nbsp; <a class="qindex" href="links.html">Links</a> &nbsp; <a class="qindex" href="faq.html">FAQ</a> &nbsp; <a class="qindex" href="tutorial.html">Tutorial</a></CENTER>
<HR>
<!-- Generated by Doxygen 1.6.2 -->
  <div class="navpath"><a class="el" href="dir_f14fd23bc74c76f288031ad23b3f3505.html">include</a>
  </div>
<div class="contents">
<h1>RtMidi.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**********************************************************************/</span>
<a name="l00036"></a>00036 <span class="comment">/**********************************************************************/</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="comment">// RtMidi: Version 1.0.15</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#ifndef RTMIDI_H</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#define RTMIDI_H</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;RtError.h&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a><a class="code" href="classRtMidi.html">00046</a> <span class="keyword">class </span><a class="code" href="classRtMidi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a>
<a name="l00047"></a>00047 {
<a name="l00048"></a>00048  <span class="keyword">public</span>:
<a name="l00049"></a>00049 
<a name="l00051"></a>00051   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRtMidi.html#ad9e30a89638f93193cb40edebaa536f5" title="Pure virtual openPort() function.">openPort</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0, <span class="keyword">const</span> std::string portName = std::string( <span class="stringliteral">&quot;RtMidi&quot;</span> ) ) = 0;
<a name="l00052"></a>00052 
<a name="l00054"></a>00054   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRtMidi.html#a9200cde4f5337c0bc421d20bd4fcf654" title="Pure virtual openVirtualPort() function.">openVirtualPort</a>( <span class="keyword">const</span> std::string portName = std::string( <span class="stringliteral">&quot;RtMidi&quot;</span> ) ) = 0;
<a name="l00055"></a>00055 
<a name="l00057"></a>00057   <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classRtMidi.html#a9a49ef73a1e6007444019a7ae095e195" title="Pure virtual getPortCount() function.">getPortCount</a>() = 0;
<a name="l00058"></a>00058 
<a name="l00060"></a>00060   <span class="keyword">virtual</span> std::string <a class="code" href="classRtMidi.html#a799e2b9f4df39b298518f2b394db3391" title="Pure virtual getPortName() function.">getPortName</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 ) = 0;
<a name="l00061"></a>00061 
<a name="l00063"></a>00063   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRtMidi.html#a36125c4fa16550345b57f4a4927f5b4a" title="Pure virtual closePort() function.">closePort</a>( <span class="keywordtype">void</span> ) = 0;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065  <span class="keyword">protected</span>:
<a name="l00066"></a>00066 
<a name="l00067"></a>00067   <a class="code" href="classRtMidi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a>();
<a name="l00068"></a>00068   <span class="keyword">virtual</span> ~<a class="code" href="classRtMidi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a>() {};
<a name="l00069"></a>00069 
<a name="l00070"></a>00070   <span class="comment">// A basic error reporting function for internal use in the RtMidi</span>
<a name="l00071"></a>00071   <span class="comment">// subclasses.  The behavior of this function can be modified to</span>
<a name="l00072"></a>00072   <span class="comment">// suit specific needs.</span>
<a name="l00073"></a>00073   <span class="keywordtype">void</span> error( <a class="code" href="classRtError.html#ab04667aae01bffc354a9ac6bda6903ac" title="Defined RtError types.">RtError::Type</a> type );
<a name="l00074"></a>00074 
<a name="l00075"></a>00075   <span class="keywordtype">void</span> *apiData_;
<a name="l00076"></a>00076   <span class="keywordtype">bool</span> connected_;
<a name="l00077"></a>00077   std::string errorString_;
<a name="l00078"></a>00078 };
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">/**********************************************************************/</span>
<a name="l00096"></a>00096 <span class="comment">/**********************************************************************/</span>
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="classRtMidiIn.html">00100</a> <span class="keyword">class </span><a class="code" href="classRtMidiIn.html" title="A realtime MIDI input class.">RtMidiIn</a> : <span class="keyword">public</span> <a class="code" href="classRtMidi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a>
<a name="l00101"></a>00101 {
<a name="l00102"></a>00102  <span class="keyword">public</span>:
<a name="l00103"></a>00103 
<a name="l00105"></a><a class="code" href="classRtMidiIn.html#a297d2eb3c3420b437970a6fc59d89cbf">00105</a>   <span class="keyword">typedef</span> void (*<a class="code" href="classRtMidiIn.html#a297d2eb3c3420b437970a6fc59d89cbf" title="User callback function type definition.">RtMidiCallback</a>)( <span class="keywordtype">double</span> timeStamp, std::vector&lt;unsigned char&gt; *message, <span class="keywordtype">void</span> *userData);
<a name="l00106"></a>00106 
<a name="l00108"></a>00108 
<a name="l00115"></a>00115   <a class="code" href="classRtMidiIn.html#a1d70da3ef18d24c5b3f0cc01888e093d" title="Default constructor that allows an optional client name and queue size.">RtMidiIn</a>( <span class="keyword">const</span> std::string clientName = std::string( <span class="stringliteral">&quot;RtMidi Input Client&quot;</span>), <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> queueSizeLimit = 100 );
<a name="l00116"></a>00116 
<a name="l00118"></a>00118   <a class="code" href="classRtMidiIn.html#af865d88c154b6fdadc640da5dc278d40" title="If a MIDI connection is still open, it will be closed by the destructor.">~RtMidiIn</a>();
<a name="l00119"></a>00119 
<a name="l00121"></a>00121 
<a name="l00125"></a>00125   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a7e853661b1056083e07318d67c51f6fd" title="Open a MIDI input connection.">openPort</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0, <span class="keyword">const</span> std::string Portname = std::string( <span class="stringliteral">&quot;RtMidi Input&quot;</span> ) );
<a name="l00126"></a>00126 
<a name="l00128"></a>00128 
<a name="l00134"></a>00134   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a245261b3f12ce727faed18fcfeef18c2" title="Create a virtual input port, with optional name, to allow software connections (OS...">openVirtualPort</a>( <span class="keyword">const</span> std::string portName = std::string( <span class="stringliteral">&quot;RtMidi Input&quot;</span> ) );
<a name="l00135"></a>00135 
<a name="l00137"></a>00137 
<a name="l00143"></a>00143   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a7590563461c7467608a4b3806406b32d" title="Set a callback function to be invoked for incoming MIDI messages.">setCallback</a>( <a class="code" href="classRtMidiIn.html#a297d2eb3c3420b437970a6fc59d89cbf" title="User callback function type definition.">RtMidiCallback</a> callback, <span class="keywordtype">void</span> *userData = 0 );
<a name="l00144"></a>00144 
<a name="l00146"></a>00146 
<a name="l00150"></a>00150   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#ade23832a66c1ed56965c26325602543e" title="Cancel use of the current callback function (if one exists).">cancelCallback</a>();
<a name="l00151"></a>00151 
<a name="l00153"></a>00153   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#a55bacf0d228fd8e3be6a79d12fd1dc39" title="Close an open MIDI connection (if one exists).">closePort</a>( <span class="keywordtype">void</span> );
<a name="l00154"></a>00154 
<a name="l00156"></a>00156   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classRtMidiIn.html#a62b1b38aa8e5f11cd66f03d59228f4e4" title="Return the number of available MIDI input ports.">getPortCount</a>();
<a name="l00157"></a>00157 
<a name="l00159"></a>00159 
<a name="l00162"></a>00162   std::string <a class="code" href="classRtMidiIn.html#af2961fff09fa01a3d5bc0f0c5a042aaf" title="Return a string identifier for the specified MIDI input port number.">getPortName</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 );
<a name="l00163"></a>00163 
<a name="l00165"></a>00165 
<a name="l00172"></a>00172   <span class="keywordtype">void</span> <a class="code" href="classRtMidiIn.html#af9507125aaa42276ccc01df576fc3533" title="Specify whether certain MIDI message types should be queued or ignored during input...">ignoreTypes</a>( <span class="keywordtype">bool</span> midiSysex = <span class="keyword">true</span>, <span class="keywordtype">bool</span> midiTime = <span class="keyword">true</span>, <span class="keywordtype">bool</span> midiSense = <span class="keyword">true</span> );
<a name="l00173"></a>00173 
<a name="l00175"></a>00175 
<a name="l00182"></a>00182   <span class="keywordtype">double</span> <a class="code" href="classRtMidiIn.html#a1ba10ecd276b30a8579c7d60a9c890eb" title="Fill the user-provided vector with the data bytes for the next available MIDI message...">getMessage</a>( std::vector&lt;unsigned char&gt; *message );
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <span class="comment">// A MIDI structure used internally by the class to store incoming</span>
<a name="l00185"></a>00185   <span class="comment">// messages.  Each message represents one and only one MIDI message.</span>
<a name="l00186"></a>00186   <span class="keyword">struct </span>MidiMessage { 
<a name="l00187"></a>00187     std::vector&lt;unsigned char&gt; bytes; 
<a name="l00188"></a>00188     <span class="keywordtype">double</span> timeStamp;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     <span class="comment">// Default constructor.</span>
<a name="l00191"></a>00191     MidiMessage()
<a name="l00192"></a>00192       :bytes(0), timeStamp(0.0) {}
<a name="l00193"></a>00193   };
<a name="l00194"></a>00194 
<a name="l00195"></a>00195   <span class="keyword">struct </span>MidiQueue {
<a name="l00196"></a>00196     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> front;
<a name="l00197"></a>00197     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> back;
<a name="l00198"></a>00198     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size;
<a name="l00199"></a>00199     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ringSize;
<a name="l00200"></a>00200                   MidiMessage *ring;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     <span class="comment">// Default constructor.</span>
<a name="l00203"></a>00203     MidiQueue()
<a name="l00204"></a>00204       :front(0), back(0), size(0), ringSize(0) {}
<a name="l00205"></a>00205   };
<a name="l00206"></a>00206 
<a name="l00207"></a>00207   <span class="comment">// The RtMidiInData structure is used to pass private class data to</span>
<a name="l00208"></a>00208   <span class="comment">// the MIDI input handling function or thread.</span>
<a name="l00209"></a>00209   <span class="keyword">struct </span>RtMidiInData {
<a name="l00210"></a>00210     MidiQueue queue;
<a name="l00211"></a>00211     MidiMessage message;
<a name="l00212"></a>00212     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ignoreFlags;
<a name="l00213"></a>00213     <span class="keywordtype">bool</span> doInput;
<a name="l00214"></a>00214     <span class="keywordtype">bool</span> firstMessage;
<a name="l00215"></a>00215     <span class="keywordtype">void</span> *apiData;
<a name="l00216"></a>00216     <span class="keywordtype">bool</span> usingCallback;
<a name="l00217"></a>00217     <span class="keywordtype">void</span> *userCallback;
<a name="l00218"></a>00218     <span class="keywordtype">void</span> *userData;
<a name="l00219"></a>00219     <span class="keywordtype">bool</span> continueSysex;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="comment">// Default constructor.</span>
<a name="l00222"></a>00222     RtMidiInData()
<a name="l00223"></a>00223       : ignoreFlags(7), doInput(false), firstMessage(true),
<a name="l00224"></a>00224         apiData(0), usingCallback(false), userCallback(0), userData(0),
<a name="l00225"></a>00225         continueSysex(false) {}
<a name="l00226"></a>00226   };
<a name="l00227"></a>00227 
<a name="l00228"></a>00228  <span class="keyword">private</span>:
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <span class="keywordtype">void</span> initialize( <span class="keyword">const</span> std::string&amp; clientName );
<a name="l00231"></a>00231   RtMidiInData inputData_;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 };
<a name="l00234"></a>00234 
<a name="l00235"></a>00235 <span class="comment">/**********************************************************************/</span>
<a name="l00247"></a>00247 <span class="comment">/**********************************************************************/</span>
<a name="l00248"></a>00248 
<a name="l00249"></a><a class="code" href="classRtMidiOut.html">00249</a> <span class="keyword">class </span><a class="code" href="classRtMidiOut.html" title="A realtime MIDI output class.">RtMidiOut</a> : <span class="keyword">public</span> <a class="code" href="classRtMidi.html" title="An abstract base class for realtime MIDI input/output.">RtMidi</a>
<a name="l00250"></a>00250 {
<a name="l00251"></a>00251  <span class="keyword">public</span>:
<a name="l00252"></a>00252 
<a name="l00254"></a>00254 
<a name="l00257"></a>00257   <a class="code" href="classRtMidiOut.html#a8ed1b492900f3410bf91ad53203b9db3" title="Default constructor that allows an optional client name.">RtMidiOut</a>( <span class="keyword">const</span> std::string clientName = std::string( <span class="stringliteral">&quot;RtMidi Output Client&quot;</span> ) );
<a name="l00258"></a>00258 
<a name="l00260"></a>00260   <a class="code" href="classRtMidiOut.html#ab776c431bd84193febb2f78fb8c7e792" title="The destructor closes any open MIDI connections.">~RtMidiOut</a>();
<a name="l00261"></a>00261 
<a name="l00263"></a>00263 
<a name="l00269"></a>00269   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a1b280d67317cd473a8816aeb2fe6c186" title="Open a MIDI output connection.">openPort</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0, <span class="keyword">const</span> std::string portName = std::string( <span class="stringliteral">&quot;RtMidi Output&quot;</span> ) );
<a name="l00270"></a>00270 
<a name="l00272"></a>00272   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a3092e53a8aed2d3b163fcaa05fafd041" title="Close an open MIDI connection (if one exists).">closePort</a>();
<a name="l00273"></a>00273 
<a name="l00275"></a>00275 
<a name="l00283"></a>00283   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a47068e1c076d91fd89587c0ccdeddc7a" title="Create a virtual output port, with optional name, to allow software connections (OS...">openVirtualPort</a>( <span class="keyword">const</span> std::string portName = std::string( <span class="stringliteral">&quot;RtMidi Output&quot;</span> ) );
<a name="l00284"></a>00284 
<a name="l00286"></a>00286   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classRtMidiOut.html#ad6cddbcc7faa20a7be229f765ade0877" title="Return the number of available MIDI output ports.">getPortCount</a>();
<a name="l00287"></a>00287 
<a name="l00289"></a>00289 
<a name="l00292"></a>00292   std::string <a class="code" href="classRtMidiOut.html#acc4ae0ab71a49ae7629075d5a9cd837c" title="Return a string identifier for the specified MIDI port type and number.">getPortName</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> portNumber = 0 );
<a name="l00293"></a>00293 
<a name="l00295"></a>00295 
<a name="l00299"></a>00299   <span class="keywordtype">void</span> <a class="code" href="classRtMidiOut.html#a0bd8972ef8ac4e8d37ccc4b5d51c2eb3" title="Immediately send a single message out an open MIDI output port.">sendMessage</a>( std::vector&lt;unsigned char&gt; *message );
<a name="l00300"></a>00300 
<a name="l00301"></a>00301  <span class="keyword">private</span>:
<a name="l00302"></a>00302 
<a name="l00303"></a>00303   <span class="keywordtype">void</span> initialize( <span class="keyword">const</span> std::string&amp; clientName );
<a name="l00304"></a>00304 };
<a name="l00305"></a>00305 
<a name="l00306"></a>00306 <span class="preprocessor">#endif</span>
</pre></div></div>
<HR>

<table>
  <tr><td><A HREF="http://ccrma.stanford.edu/software/stk/"><I>The Synthesis ToolKit in C++ (STK)</I></A></td></tr>
  <tr><td>&copy;1995-2011 Perry R. Cook and Gary P. Scavone. All Rights Reserved.</td></tr>
</table>

</BODY>
</HTML>
